{"ast":null,"code":"var _jsxFileName = \"/Users/kiran.rudrangi/source/pact-workshop-st2/consumer/src/App.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport 'spectre.css/dist/spectre.min.css';\nimport 'spectre.css/dist/spectre-icons.min.css';\nimport 'spectre.css/dist/spectre-exp.min.css';\nimport Heading from \"./Heading\";\nimport Layout from \"./Layout\";\nimport { withRouter } from \"react-router\";\nimport API from \"./api\";\nimport PropTypes from 'prop-types';\nconst productPropTypes = {\n  product: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    type: PropTypes.string.isRequired\n  }).isRequired\n};\n\nfunction ProductTableRow(props) {\n  return React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  }, props.product.name), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }, props.product.type), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"btn btn-link\",\n    to: {\n      pathname: \"/products/\" + props.product.id,\n      state: {\n        product: props.product\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }, \"See more!\")));\n}\n\nProductTableRow.propTypes = productPropTypes;\n\nfunction ProductTable(props) {\n  const products = props.products.map(p => React.createElement(ProductTableRow, {\n    key: p.id,\n    product: p,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }));\n  return React.createElement(\"table\", {\n    className: \"table table-striped table-hover\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, \"Name\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, \"Type\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, products));\n}\n\nProductTable.propTypes = {\n  products: PropTypes.arrayOf(productPropTypes.product)\n};\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      searchText: '',\n      products: [],\n      visibleProducts: []\n    };\n    this.onSearchTextChange = this.onSearchTextChange.bind(this);\n  }\n\n  componentDidMount() {\n    API.getAllProducts().then(r => {\n      this.setState({\n        loading: false,\n        products: r\n      });\n      this.determineVisibleProducts();\n    }).catch(e => {\n      this.props.history.push({\n        pathname: \"/error\",\n        state: {\n          error: e.toString()\n        }\n      });\n    });\n  }\n\n  determineVisibleProducts() {\n    const findProducts = search => {\n      search = search.toLowerCase();\n      return this.state.products.filter(p => p.id.toLowerCase().includes(search) || p.name.toLowerCase().includes(search) || p.type.toLowerCase().includes(search));\n    };\n\n    this.setState(s => {\n      return {\n        visibleProducts: s.searchText ? findProducts(s.searchText) : s.products\n      };\n    });\n  }\n\n  onSearchTextChange(e) {\n    this.setState({\n      searchText: e.target.value\n    });\n    this.determineVisibleProducts();\n  }\n\n  render() {\n    return React.createElement(Layout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(Heading, {\n      text: \"Products\",\n      href: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"form-group col-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"form-label\",\n      htmlFor: \"input-product-search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Search\"), React.createElement(\"input\", {\n      id: \"input-product-search\",\n      className: \"form-input\",\n      type: \"text\",\n      value: this.state.searchText,\n      onChange: this.onSearchTextChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    })), this.state.loading ? React.createElement(\"div\", {\n      className: \"loading loading-lg centered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }) : React.createElement(ProductTable, {\n      products: this.state.visibleProducts,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }));\n  }\n\n}\n\nApp.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired\n  }).isRequired\n};\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/kiran.rudrangi/source/pact-workshop-st2/consumer/src/App.js"],"names":["React","Link","Heading","Layout","withRouter","API","PropTypes","productPropTypes","product","shape","id","string","isRequired","name","type","ProductTableRow","props","pathname","state","propTypes","ProductTable","products","map","p","arrayOf","App","Component","constructor","loading","searchText","visibleProducts","onSearchTextChange","bind","componentDidMount","getAllProducts","then","r","setState","determineVisibleProducts","catch","e","history","push","error","toString","findProducts","search","toLowerCase","filter","includes","s","target","value","render","func"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Link} from 'react-router-dom';\nimport 'spectre.css/dist/spectre.min.css';\nimport 'spectre.css/dist/spectre-icons.min.css';\nimport 'spectre.css/dist/spectre-exp.min.css';\nimport Heading from \"./Heading\";\nimport Layout from \"./Layout\";\nimport {withRouter} from \"react-router\";\nimport API from \"./api\";\nimport PropTypes from 'prop-types';\n\nconst productPropTypes = {\n    product: PropTypes.shape({\n        id: PropTypes.string.isRequired,\n        name: PropTypes.string.isRequired,\n        type: PropTypes.string.isRequired,\n    }).isRequired\n};\n\nfunction ProductTableRow(props) {\n    return (\n        <tr>\n            <td>{props.product.name}</td>\n            <td>{props.product.type}</td>\n            <td>\n                <Link className=\"btn btn-link\" to={{\n                    pathname: \"/products/\" + props.product.id,\n                    state: {\n                        product: props.product\n                    }\n                }}>See more!</Link>\n            </td>\n        </tr>\n    );\n}\nProductTableRow.propTypes = productPropTypes;\n\nfunction ProductTable(props) {\n    const products = props.products.map(p => (\n        <ProductTableRow key={p.id} product={p}/>\n    ));\n    return (\n        <table className=\"table table-striped table-hover\">\n            <thead>\n            <tr>\n                <th>Name</th>\n                <th>Type</th>\n                <th/>\n            </tr>\n            </thead>\n            <tbody>\n            {products}\n            </tbody>\n        </table>\n    );\n}\n\nProductTable.propTypes = {\n    products: PropTypes.arrayOf(productPropTypes.product)\n};\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            loading: true,\n            searchText: '',\n            products: [],\n            visibleProducts: []\n        };\n        this.onSearchTextChange = this.onSearchTextChange.bind(this);\n    }\n\n    componentDidMount() {\n        API.getAllProducts()\n            .then(r => {\n                this.setState({\n                    loading: false,\n                    products: r\n                });\n                this.determineVisibleProducts();\n            })\n            .catch(e => {\n                this.props.history.push({\n                    pathname: \"/error\",\n                    state: {\n                        error: e.toString()\n                    }\n                });\n            });\n    }\n\n    determineVisibleProducts() {\n        const findProducts = (search) => {\n            search = search.toLowerCase();\n            return this.state.products.filter(p =>\n                p.id.toLowerCase().includes(search)\n                || p.name.toLowerCase().includes(search)\n                || p.type.toLowerCase().includes(search)\n            )\n        };\n        this.setState((s) => {\n            return {\n                visibleProducts: s.searchText ? findProducts(s.searchText) : s.products\n            }\n        });\n    }\n\n    onSearchTextChange(e) {\n        this.setState({\n            searchText: e.target.value\n        });\n        this.determineVisibleProducts()\n    }\n\n    render() {\n        return (\n            <Layout>\n                <Heading text=\"Products\" href=\"/\"/>\n                <div className=\"form-group col-2\">\n                    <label className=\"form-label\" htmlFor=\"input-product-search\">Search</label>\n                    <input id=\"input-product-search\" className=\"form-input\" type=\"text\"\n                           value={this.state.searchText} onChange={this.onSearchTextChange}/>\n                </div>\n                {\n                    this.state.loading ?\n                        <div className=\"loading loading-lg centered\"/> :\n                        <ProductTable products={this.state.visibleProducts}/>\n                }\n            </Layout>\n        );\n    }\n}\n\nApp.propTypes = {\n    history: PropTypes.shape({\n            push: PropTypes.func.isRequired\n        }\n    ).isRequired\n};\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}